<style>
  .display_picture {
    border-radius: 50%;
    background-position: center;
    background-size: cover;
    height: 150px;
    width: 150px;
    text-align: center
  }

  .imagePreview {
    background-position: center;
    background-size: contain;
    background-repeat: no-repeat;
    height: 50vh;
    text-align: center
  }


  .display_picture:hover .highlight {
    display: block;
    color: #ffffff;
    padding-top: 40px
  }

  .highlight {
    display: none
  }

  .participants:hover {
    background: #f5f5f5;
    cursor: pointer;
  }

  .participants {

    background: #ffffff
  }

  .file_upload {
    opacity: 0.0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    -moz-opacity: 0.0;
    -khtml-opacity: 0.0;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    width: 100%;
    height: 100%;
  }

  /* .file_upload_add{
  opacity: 0.0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  -moz-opacity: 0.0;
  -khtml-opacity: 0.0;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 80%;
  height:100%;
} */


  .file_upload_add {
    opacity: 0.0;
    position: absolute;
    top: 0px;
    width: 100px;
    height: 100%;
    text-align: center;
  }

  .reply_icon {
    opacity: 0;
    position: relative;
  }

  .reply_icons {
    position: relative;
    opacity: 0;

  }

  .reply_icon_rec {
    opacity: 0
  }

  .sent-text:hover .reply_icon {
    opacity: 1
  }

  .sent-text:hover .reply_icons {
    opacity: 1;
    position: absolute;
    right: 20px;
    margin-top: -70px;
  }

  .recived-text:hover .reply_icon_rec {
    opacity: 1
  }

  .img-recived:hover .reply_icon_rec {
    display: block
  }

  .img-sent:hover .reply_icon {
    opacity: 1
  }

  .img-sent:hover .reply_icons {
    opacity: 1;
    position: absolute;
    right: 20px;
    margin-top: -70px;
  }

  .file-sent:hover .reply_icons {
    opacity: 1;
    position: absolute;
    right: 20px;
    margin-top: -70px;
  }

  .file-sent:hover .reply_icon {
    opacity: 1;
    /* display:block */
  }

  .file-recived:hover .reply_icon_rec {
    display: block
  }

  .flex-container {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    overflow-x: auto;
    /* background-color: DodgerBlue; */

  }

  .flex-container>div {
    background-color: #f1f1f1;
    width: 100px;
    margin: 10px;
    text-align: center;
    /* line-height: 100px; */
    font-size: 30px;
  }

  .display_picture_view {
    border-radius: 50%;
    background-position: center;
    background-size: cover;
    height: 45px;
    width: 45px;
    text-align: center;
  }

  ul.no-bullets {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .dropdown-menus {
    position: absolute;
    top: 100%;
    right: 0;
    z-index: 1000;
    display: none;
    float: right;
    min-width: 160px;
    padding: 5px 0;
    padding-left: 0px;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0, 0, 0, .15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    color: black
  }
</style>
<div class="col-md-9 col-sm-8 pull-right " style="padding:0px;" id="messenger">
  <div class="row" style=";margin:0px;">
    <div class="{{user.is_show?'col-md-8':'col-md-12'}} bgImg " style="padding:0px;">
      <div class="row" style="margin:0px;position:sticky;z-index:1;">
        <div class="" style="background-color:#ededed;height:60px;padding:10px;">
          <div class=" {{user.is_show?'col-md-2':'col-md-1'}}  " ng-click="user.is_show=true">
            <!-- <div class="">
              <img ng-src="{{user.dp}}" src="p/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
            </div> -->
            <div class="display_picture_view" style="background-image:url({{user.dp?user.dp:'/static/images/userIcon.png'}})">
            </div>
          </div>
          <div class="{{user.is_show?'col-md-9':'col-md-10'}} col-sm-9" ng-click="user.is_show=true" style="">
            <h5 style="margin-top:0px;">{{user.name}} </h5>
            <p ng-if="!show.showTypingVal">last seen today</p>
              <p ng-if="show.showTypingVal">Typing....</p>
          </div>

          <div class="pull-right" >
            <img src="/static/images/icons8-outgoing-call-30.png" alt="" ng-click="call(user.visitor.mobile)" style="padding-right:10px;margin-top:5px;">
            <i></i>
            <!-- <i style="padding:10px" class="fa fa-thumb-tack fa-lg " ng-click="setToPin()"></i> -->
            <img  ng-if="user.is_pin" src="/static/images/icons8-star-filled-48.png" style="height:20px;margin-top:10px;" ng-click="setToPin()" class="pull-right">
            <img ng-if="!user.is_pin" src="/static/images/icons8-star-filled-50.png" style="height:20px;margin-top:10px;"ng-click="setToPin()" class="pull-right">



        </div>
      </div>
      <div class="scrollView margin-auto m-bottom-5 padding-2" id="scrollView" style="width:100%;">
        <div ng-repeat="message in messages track by $index" style="padding-left: 20px;padding-right: 20px;">
          <!-- if only message is sent -->
          <div ng-if="(me.pk == message.user.pk || message.sentByAgent) && message.attachment === null" class="m-top-5 m-bottom-5">

            <div class="" style="display:flex">
              <div class="sent-text" style="margin-left: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">
                <div ng-if="message.replyTo.pk" style="padding:5px 65px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#cfe9ba;padding-left:10px">
                  <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                  <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div class="row">
                  <span style="display:flex;position:relative">
                    {{message.message}}
                    <div class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                      <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show" style="padding:7px;"></i><br>
                      <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                        <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                        <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                      </div>

                    </div>
                  </span>

                </div>
              </div>

              <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
                <img ng-src="{{u.profile.displayPicture}}" src="p/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}} </p>
            </div>
          </div>

          <!-- if only message is recived -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) && message.attachment === null" class="m-top-5 m-bottom-5">
            <div class="" style="display:flex">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: 2%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="recived-text" style="margin-right: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">
                <!-- <span style="color:#7bbaf4">
                  <i class="fa fa-reply reply_icon_rec pull-right"   ng-click="replyTo($index)"></i>
                   {{message.user.first_name}} {{message.user.last_name}}  <br/>
                 </span> -->

                <div class="row">

                  <span class=" " style="display:flex;color:#7bbaf4">
                    <!-- {{message.message}} -->
                    {{message.user.first_name}} {{message.user.last_name}}
                    <div class=" dropdown reply_icon_rec">
                      <i class="fa fa-angle-down  dropdown-toggle  pull-right" ng-click="message.show=!message.show" style="padding:3px;"></i>
                      <br>
                      <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                        <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                        <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                      </div>

                    </div>
                  </span>

                </div>

                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#ededed">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                {{message.message}}
              </div>
            </div>
            <div style="display:flex;width:87%" class=" margin-auto">
              <p class="margin-r-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if attached != null and message == null  is sent-->

          <div ng-if="(me.pk == message.user.pk || message.sentByAgent)  && message.message === null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto">
            <div class="" style="display:flex">
              <div class="img-sent padding-2" style="margin-left:auto; width:300px;height:300px">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">

                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <img class=" " ng-src="{{message.attachment}}" ng-click="viewImage(message.attachment)" alt="photo" width="289" height="289">
              </div>
              <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;" class=" margin-auto">
              <p class="margin-l-auto" style="margin-top:10px;">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if attached img  != null and message != null is sent -->

          <div ng-if="(me.pk == message.user.pk || message.sentByAgent)  && message.attachment != null && message.fileType === 'image' &&message.message != null" class="  m-top-5 m-bottom-5 margin-l-auto">
            <div class="">
              <div class="img-sent  padding-2" style="margin-left:auto; width:300px;height:300px;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;margin-right: 58px;border-radius: 6px 6px 0 0 !important;">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <img class=" " ng-src="{{message.attachment}}" ng-click="viewImage(message.attachment)" alt="photo" width="289" height="289">
              </div>
              <div class="" style="display:flex;">
                <p class="sent-text" style="margin-left: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;border-radius: 0 0 6px 6px !important;">{{message.message}}</p>
                <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2.3%;">
                  <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
                </div>
              </div>
            </div>
            <div style="display:flex;width:87%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>
          <!-- if attached != null and message == null  is recived-->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) && message.attachment != null && message.message === null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto">
            <div class="" style="display:flex">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="img-recived padding-2" style=" width:300px;height:300px;margin-left:15px">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <img class=" " ng-src="{{message.attachment}}" ng-click="viewImage(message.attachment)" alt="photo" width="289" height="289">
              </div>
            </div>
            <div style="display:flex;width:87%;" class=" margin-auto">
              <p class="margin-l-auto" style="margin-top:10px;margin-left: 15px !important;">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if attached img  != null and message != null is recived -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) && message.attachment != null && message.message != null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto ">
            <div class="">
              <div class="img-recived  padding-2" style="margin-right:auto; width:300px;height:300px;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;margin-right: 58px;">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <img class=" " ng-src="{{message.attachment}}" ng-click="viewImage(message.attachment)" alt="photo" width="289" height="289">
              </div>
              <div class="" style="display:flex;margin-top: 20px;">
                <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: 2%;">
                  <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
                </div>
                <p class="recived-text" style="margin-right: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">{{message.message}}</p>
              </div>
            </div>
            <div style="display:flex;width:87%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>
          <!-- if file is sent and filetype is pdf -->

          <div ng-if="me.pk === message.user.pk &&  message.fileType == 'pdf' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-pdf-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>


          <!-- if file is recived and filetype is pdf -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) &&  message.fileType == 'pdf' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-pdf-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p style="margin-left:42px">{{message.created | timeAgo}}</p>
            </div>
          </div>


          <!-- if file is sent and filetype is doc -->

          <div ng-if="me.pk === message.user.pk &&  message.fileType == 'word' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-word-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if file is recived and filetype is doc -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) &&  message.fileType == 'word' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-word-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>

                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p style="margin-left:42px">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if file is sent and filetype is ppt -->

          <div ng-if="me.pk === message.user.pk &&  message.fileType == 'ppt' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-ppt-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>


          <!-- if file is recived and filetype is ppt -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) &&  message.fileType == 'ppt' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-ppt-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>

                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p style="margin-left:42px">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if file is sent and filetype is xl -->

          <div ng-if="me.pk === message.user.pk &&  message.fileType == 'xl' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class="{{message.replyTo.pk?'reply_icons':'reply_icon'}} dropdown">
                  <i class="fa fa-angle-down  dropdown-toggle pull-right" ng-click="message.show=!message.show"></i><br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer;">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-xls-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p class="margin-l-auto">{{message.created | timeAgo}}</p>
            </div>
          </div>

          <!-- if file is recived and filetype is xl -->

          <div ng-if="(me.pk != message.user.pk && !message.sentByAgent) &&  message.fileType == 'xl' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
            <div class="" style="display: flex;justify-content: space-between;">
              <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;">
                <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
              <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
                <span class=" dropdown" style="color:#7bbaf4">
                  <i class="fa fa-angle-down  dropdown-toggle reply_icon_rec pull-right" ng-click="message.show=!message.show"></i> {{message.user.first_name}} {{message.user.last_name}}<br>
                  <div class="dropdown-menus" ng-if="message.show" style="display:block!important;padding-left:15px;cursor:pointer">
                    <div class="dropdown-item" ng-click="replyTo($index)"> Reply </div>
                    <div class="dropdown-item" ng-click="forwardTo($index)"> Forward </div>
                  </div>
                </span>
                <div ng-if="message.replyTo.pk" style="padding:5px;border-left:5px solid #7bbaf4;border-radius:5px ;background:#fbd4d3">
                  <span style="color:#7bbaf4">
                    <span ng-if="message.replyTo.user.pk !=me.pk" style="color:#7bbaf4">{{message.replyTo.user.first_name}} {{message.replyTo.user.last_name}} <br /> </span>
                    <span ng-if="message.replyTo.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
                  </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment === null"> {{message.replyTo.message}} </span>
                  <span style="color:#676767" ng-if="message.replyTo.attachment != null"> {{message.replyTo.fileName}} </span>
                </div>
                <div style="display:flex;width:100%;" class="file-card padding-2 ">
                  <img src="/static/images/icons8-xls-96.png" alt="" width="40">
                  <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
                  <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                    <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                        fill="#000" />
                    </svg>
                  </a>


                </div>
                <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
                  <div style="display:flex;" class="margin-r-auto">
                    <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000/1000}}</p>
                    <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
              <p style="margin-left:42px">{{message.created | timeAgo}}</p>
            </div>
          </div>




        </div>
      </div>
      <div class="row" ng-if="allFiles.length>0" style="height:84vh;position:absolute;background:#eeeeee;z-index:33333;top:62px;width:100%;margin-left:0px">
        <div class="col-md-12">
          <div class="row" style="position:relative">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12" style="position:absolute;bottom:85px;left:900px;z-index:3333">
                  <div class="text-center" style="height:60px;width:60px;background-color:#3bd17a;border-radius: 50%;padding: 10px;">
                    <i class="fa fa-arrow-right fa-2x" aria-hidden="true" style="color:white;" ng-click="postFiles()"></i>
                  </div>
                </div>
              </div>
              <div class="row" style="height:60px;background:#3bd17a">
                <div class="col-md-12">
                  <h4 style="color:#ffffff;padding-top:10px"> <i class="fa fa-close" style="padding-right:15px" ng-click="closeAtachment()"></i> Preview </h4>
                </div>
              </div>
              <div class="row" style="height:65vh">
                <div class="col-md-12" style="padding: 60px;">
                  <div ng-show="typ == 'image'" id="imagePreview" class="imagePreview"></div>
                  <div ng-show="typ != 'image'" class="text-center" style="margin-top:225px">
                    <i class="fa fa-file fa-3x"></i>

                  </div>
                </div>
              </div>
              <div class="row" style="background:#dedede;height:13vh">
                <div class="col-md-12 flex-container text-center">
                  <div ng-click="previewImage($index);$event.stopPropagation()" ng-repeat="f in allFiles" style="padding-top:15px"><i class="fa fa-file"></i><br /><span style="font-size:5px!important">{{f.name | limitTo : 40}}</span></div>
                  <div style="padding-top:30px">
                    <i class="fa fa-plus fa-lg"></i>
                    <input type="file" class="file_upload_add" ng-model="form.file" onchange="angular.element(this).scope().fileAdded(this.files)" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12 col-sm-12  " ng-if="replyMsgSelected.replyMsg" style="position:absolute;bottom: 55px;background-color: #ededed;">
        <div class="row" style="padding:10px">
          <div class="col-md-offset-1 col-md-10">
            <div style="min-height:40px;border-left:5px solid #7bbaf4;padding:10px;background:#e4e4e4;border-radius:10px">
              <span ng-if="replyMsgSelected.replyMsg.user.pk !=me.pk" style="color:#7bbaf4"> {{replyMsgSelected.replyMsg.user.first_name}} {{replyMsgSelected.replyMsg.user.last_name}} <br /> </span>
              <span ng-if="replyMsgSelected.replyMsg.user.pk == me.pk" style="color:#7bbaf4"> You <br /></span>
              <span ng-if="replyMsgSelected.replyMsg.attachment === null"> {{replyMsgSelected.replyMsg.message}}</span>
              <span ng-if="replyMsgSelected.replyMsg.attachment != null"> {{replyMsgSelected.replyMsg.fileName}}</span>
            </div>
          </div>
          <div class="col-md-1 text-center">
            <i class="fa fa-close fa-lg" ng-click="removeReply()"></i>
          </div>
        </div>
      </div>
      <div class="col-md-12 col-sm-12 chat-input ">
        <div class="attachment col-md-1 col-sm-1">
          <input type="file" class="file_upload" ng-model="form.file" onchange="angular.element(this).scope().fileAdded(this.files)" />
          <!-- <input type="file" style="display : none;" file-model="form.file" onchange="angular.element(this).scope().fileNameChanged(this.files)"> -->
          <button type="button" name="button" style="border:none;background:transparent;padding:5px;">
            <img src="/static/images/icons8-attach-52.png" alt="" style="height:25px;">
          </button>
        </div>

        <div class="col-md-11 col-sm-11">
          <input ng-model="form.text" ng-enter="send()" class="form-control" type="text" placeholder="Type your message...." style="border:none !important;border-radius:30px;padding: 19px;">
        </div>

      </div>

    </div>
    </div>
    <div class="col-md-4 col-sm-12 Messenger_groupInfo" ng-if="user.is_show" style="">
      <div class="row" style="height: 92.5vh;overflow-y: scroll;scrollbar-width: none;padding: 0px 10px;">
        <div class="row" style="position: sticky;top: 0;z-index: 1;">
          <div class="" style="background-color:#ededed;height:60px;padding:20px 10px;" ng-click="user.is_show=true">
            <div class="col-md-12">
              <span>
                <i class="fa fa-times" ng-click="dismissGrpInfo()" style="padding-right:20px;font-size:20px;"></i>{{user.is_personal?'Contact Info':'Group Info'}}
              </span>
            </div>

          </div>
        </div>
        <div class="row  " style="padding:10px;border-bottom:10px solid #ececec ">
          <div class="col-md-12 " style="margin-top:30px">
            <div class="display_picture" style="background-image:url({{user.dp?user.dp:'/static/images/userIcon.png'}});background-size:contain;background-repeat:norepeat;background-position:center" ng-if="user.is_personal">
              <!-- <img ng-src="{{user.dp}}"  onerror="this.src='/static/images/userIcon.png'" style="width:150px;height:150px;" class="img img-circle"> -->
              <input type="file" class="file_upload" ng-model="user.dp" onchange="angular.element(this).scope().fileNameChanged(this.files)" />
              <div class="highlight" ng-if="!user.is_personal">
                <i class="fa fa-camera fa-3x"></i> <br /> CHANGE ICON
              </div>

            </div>

          </div>
          <div class="row" style="padding-bottom:10px;">
            <div class="col-md-12">
              <h5 ng-if="!showInput ">

                <span>

                </span>
                <span ng-if="!user.is_personal">
                  {{user.visitor.mobile}}
                </span><br><br>
                <span >
                  {{user.name}}
                </span><br><br>
                <span ng-if="!user.is_personal">
                  {{user.visitor.email}}

                </span><br><br>
                <span>
                  location:{{user.vistor.addrs}}{{user.vistor.city}},{{user.visitor.state}}-{{user.visitor.pinCode}},{{user.visitor.country}}
                </span><br><br>
                <span> Created on {{user.created | date:"dd/MM/y HH:MM"}}</span>
                <i ng-if="!user.is_personal" class="fa {{showInput?'':'fa-pencil'}} pull-right" style="font-size:15px;" ng-click="viewDetails()"></i>
              </h5>
              <div class="" ng-if="showInput">
                <!-- <p>{{contactform.mobile}}</p> -->
                <div class="form-group">
                  <label for=""> Mobile Number</label>
                  <input type="text" class="form-control" ng-model="contactform.mobile" uib-typeahead="contact as contact.mobile for contact in contactSearch($viewValue)" placeholder="Enter the mobile number" name="" value=""
                    style="border:none;background: #ededed;border-radius: 20px;padding: 25px;" ng-change="createContact()">

                </div>

                <div class="form-group">
                  <label for="">Fullname</label>
                  <input type="text" class="form-control" ng-model="contactform.name" name="" value="" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;" ng-change="createContact()">

                </div>
                <!-- <div class="form-group" ng-if="!user.is_personal">
                  <input type="text" class="form-control" ng-model="contactform.mobile.name" name=""  value="" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;">

                </div> -->
                <div class="form-group">
                  <label for="">Email</label>
                  <input type="email" class="form-control" placeholder="Enter the email" ng-model="contactform.email" name="" value="" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;" ng-change="createContact()">

                </div>

                <div class="form-group">
                  <label for="">Address</label>
                  <input type="text" class="form-control" ng-model="contactform.addrs" name="" value="" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;" ng-change="createContact()">

                </div>
                <div class="form-group">
                  <label for="">Pincode</label>
                  <input type="text" class="form-control" ng-model="contactform.pinCode" name="" value="" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;" ng-change="createContact()">

                </div>

              </div>
              <!-- <i class="fa  fa-check pull-right"  style="font-size:15px;" ng-click="createContact()" ng-show="showInput"></i>  -->

            </div>


          </div>
        </div>
        <div class="row " style="background-color:white;margin-bottom:10px;padding:10px 0px;margin-top:10px;border-bottom:10px solid #ececec" >
          <div class="col-md-12">
            <div class="form-group">
              <label for="" style="color:#3bd17a;font-weight:normal">Notes</label>
              <h5 ng-hide="showNote" >{{user.visitor.notes}} <i class="fa fa-pencil pull-right" ng-click="showNote=true" ng-init="showNote=false"></i></h5>
              <textarea name="name" ng-if="!user.is_personal && showNote" class="form-control" ng-model="contactform.notes" rows="8" cols="80" style="border:none;background: #ededed;border-radius: 20px;padding: 25px;resize:none;" ng-change="createContact()"></textarea>
            </div>
            <!-- <p style="color:#3bd17a"> Description </p>
              <h5 ng-if="!description">{{user.description}}
              </h5>
              <div class="input-group" ng-if="description">
                <textarea type="text" class="form-control" ng-model="user.description" name=""  value="" style="border:none;border-bottom:2px solid #3bd17a">
                </textarea>
                <span class="input-group-btn" >
                  <i class="fa  fa-check" style="font-size:15px;" ng-click="editThread('description')" ng-show="description"></i>
                </span>
              </div> -->
          </div>
        </div>
        <div class="row " style="background-color:white;margin-bottom:10px;padding:10px 0px;margin-top:10px;border-bottom:10px solid #ececec" ng-if="user.is_personal">
          <div class="col-md-12">
            <p style="color:#3bd17a"> About and phone number </p>
            <h5 ng-if="!description"> +91 {{contactform.mobile}}
              <!-- <i class="fa fa-pencil pull-right" style="font-size:15px;" ng-click="viewDescription()" ></i> -->
            </h5>
            <div class="input-group" ng-if="description">
              <textarea type="text" class="form-control" ng-model="user.description" name="" value="" style="border:none;border-bottom:2px solid #3bd17a">
                </textarea>
              <span class="input-group-btn">
                <i class="fa  fa-check" style="font-size:15px;" ng-click="editThread('description')" ng-show="description"></i>
              </span>
            </div>
          </div>
        </div>
        <div class="row" style="background-color:white;padding:10px 0px;margin-top:10px;border-bottom:10px solid #ececec" ng-if="user.participants.length>0&&!user.is_personal">
          <div class="col-md-12">
            <p style="color:#3bd17a">{{user.participants.length}} participants</p>
          </div>
        </div>

        <div class="row" style="border-bottom:10px solid #ececec">
          <div class="row participants" ng-click="addParticipants()" ng-if="!user.is_personal" style="margin:0px;">
            <div class="col-md-2 text-right" style="padding-top:10px;">
              <div class="" style="height:40px;width:40px;background-color:#3bd17a;border-radius: 50%;padding: 10px;">
                <i class="fa fa-user-plus" aria-hidden="true" style="font-size:20px;color:white;"></i>
              </div>
            </div>
            <div class="col-md-10" style="border-bottom:1px solid #f0f0f0;color:black;height:60px;">
              <p style="line-height:4">Add Participants</p>
            </div>
          </div>
          <div class="row participants" ng-if="!user.is_personal" ng-click="createChatThread(k)" ng-repeat="k in user.participants track by $index" style="margin:0px;">
            <div class="col-md-2 text-right" style="padding-top:10px;">
              <div class="" style="height:40px;width:40px;border-radius: 50%;">
                <img src="{{k.dp}}" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
              </div>
            </div>
            <div class="col-md-10" style="border-bottom:1px solid #f0f0f0;border-top:1px solid #f0f0f0;color:black;height:60px;">
              <p style="line-height:4"> {{k.first_name}} {{k.last_name}}</p>
            </div>
          </div>

        </div>
        <div class="row" style="background-color:white;padding:10px 0px;margin-top:10px;margin-bottom:10px;color:#df3333;font-size:17px;border-bottom:10px solid #ececec" ng-if="user.participants.length>0&&!user.is_personal">
          <div class="col-md-2 text-center">
            <i class="fa fa-sign-out fa-lg" aria-hidden="true"></i>
          </div>
          <div class="col-md-10" ng-click="removeParticipant()">
            <p>Exit group</p>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>


<div class="dialer row" ng-if="dialer.active" style="left:200px;">
  <div class="col-md-8">
    <span style="font-size: 30px;color: white;">{{dialer.number}}</span> <br>
    <span ng-if="dialer.status != 'Connected'" style="color:white;">{{dialer.status}}....</span>

    <span ng-if="dialer.status == 'Connected'" style="color:white;font-size: 18px;">{{dialer.timer}}</span>

  </div>
  <div class="col-md-1 text-center" style="padding-top:20px;padding-left:0px;">
    <i ng-if="dialer.status == 'Connected'" class="fa fa-{{!dialer.onHold? 'pause' : 'play'}} fa-2x" style="color:white;cursor:pointer;" ng-click="hold()"></i>

  </div>
  <div class="col-md-3 text-right">
    <img ng-click="disconnecCall()" ng-if="dialer.status != 'Incoming'" style="border-radius:70px;width:70px;height:70px;box-shadow: 0px 8px 18px rgba(157, 157, 157, 0.94) !important;cursor:pointer;" src="https://cdn4.iconfinder.com/data/icons/weby-flat-phone/64/Phone-06-512.png">

    </img>

    <img ng-click="reject()" ng-if="dialer.status == 'Incoming'" style="border-radius: 70px;width: 50px;height: 50px;box-shadow: 0px 8px 18px rgba(157, 157, 157, 0.94) !important;cursor: pointer;position: absolute;left: -66px;bottom: 0px;" src="https://cdn4.iconfinder.com/data/icons/weby-flat-phone/64/Phone-06-512.png">

    </img>

    <img ng-click="answerCall()" ng-if="dialer.status == 'Incoming'" style="border-radius:70px;width:70px;height:70px;box-shadow: 0px 8px 18px rgba(157, 157, 157, 0.94) !important;cursor:pointer;" src="https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-and-shapes-7/177800/320-512.png">

    </img>


  </div>


    <audio id="line-1-remoteAudio"></audio>


</div>







<div class=" col-md-8  " style="height:93vh ;background:#F3F6FB;overflow-y: auto;overflow-x: hidden;border-left:0.5px solid #f4f4f4;border-right:0.5px solid #f4f4f4;display:none">
  <div class=" margin-auto m-bottom-5 padding-2" style="width:95%;">
    <div ng-repeat="message in messages track by $index">

      <!-- if only message is sent -->

      <div ng-if="me.pk == message.originator && message.attachment === null" class="m-top-5 m-bottom-5">
        <div class="" style="display:flex">
          <p class="sent-text" style="margin-left: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">{{message.message}}</p>

          <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
            <img ng-src="{{u.profile.displayPicture}}" src="p/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if only message is recived -->

      <div ng-if="me.pk != message.originator && message.attachment === null" class="m-top-5 m-bottom-5">
        <div class="" style="display:flex">
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: 2%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
          <p class="recived-text" style="margin-right: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">{{message.message}}</p>
        </div>
        <div style="display:flex;width:87%" class=" margin-auto">
          <p class="margin-r-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if attached != null and message == null  is sent-->

      <div ng-if="me.pk == message.originator && message.message === null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto">
        <div class="" style="display:flex">
          <div class="img-sent padding-2" style="margin-left:auto; width:300px;height:300px">
            <img class=" " ng-src="{{message.attachment}}" alt="photo" width="289" height="289">
          </div>
          <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;" class=" margin-auto">
          <p class="margin-l-auto" style="margin-top:10px;">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if attached img  != null and message != null is sent -->

      <div ng-if="me.pk == message.originator && message.attachment != null && message.fileType === 'image' &&message.message != null" class="  m-top-5 m-bottom-5 margin-l-auto">
        <div class="">
          <div class="img-sent  padding-2" style="margin-left:auto; width:300px;height:300px;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;margin-right: 58px;border-radius: 6px 6px 0 0 !important;">
            <img class=" " ng-src="{{message.attachment}}" alt="photo" width="289" height="289">
          </div>
          <div class="" style="display:flex;">
            <p class="sent-text" style="margin-left: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;width: 39.8%;border-radius: 0 0 6px 6px !important;">{{message.message}}</p>

            <div style="padding: 0px;width: 40px;margin-left: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2.3%;">
              <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
            </div>
          </div>
        </div>
        <div style="display:flex;width:87%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>
      <!-- if attached != null and message == null  is recived-->

      <div ng-if="me.pk != message.originator && message.attachment != null && message.message === null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto">
        <div class="" style="display:flex">
          <div class="img-recived padding-2" style="margin-left:auto; width:300px;height:300px">
            <img class=" " ng-src="{{message.attachment}}" alt="photo" width="289" height="289">
          </div>
          <div style="padding: 0px;width: 40px;margin-right: auto;margin-top: auto;height: 40px;margin-bottom: 1%;margin-left: 2%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;" class=" margin-auto">
          <p class="margin-l-auto" style="margin-top:10px;margin-right:33px">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if attached img  != null and message != null is recived -->

      <div ng-if="me.pk != message.originator && message.attachment != null && message.message != null && message.fileType === 'image'" class="  m-top-5 m-bottom-5 margin-l-auto">
        <div class="">
          <div class="img-recived  padding-2" style="margin-right:auto; width:300px;height:300px;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;margin-right: 58px;">
            <img class=" " ng-src="{{message.attachment}}" alt="photo" width="289" height="289">
          </div>
          <div class="" style="display:flex;margin-top: 20px;">
            <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: 2%;">
              <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
            </div>
            <p class="recived-text" style="margin-right: auto;box-shadow: 0px 8px 15px rgba(213, 213, 213, 0.5) !important;">{{message.message}}</p>
          </div>
        </div>
        <div style="display:flex;width:87%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>
      <!-- if file is sent and filetype is pdf -->

      <div ng-if="me.pk === message.originator &&  message.fileType == 'pdf' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-pdf-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:white;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#fff" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:white;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:white;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>


      <!-- if file is recived and filetype is pdf -->

      <div ng-if="me.pk != message.originator &&  message.fileType == 'pdf' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
          <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-pdf-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#000" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p style="margin-left:42px">{{message.created | timeAgo}}</p>
        </div>
      </div>


      <!-- if file is sent and filetype is doc -->

      <div ng-if="me.pk === message.originator &&  message.fileType == 'word' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-word-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:white;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#fff" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:white;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:white;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if file is recived and filetype is doc -->

      <div ng-if="me.pk != message.originator &&  message.fileType == 'word' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
          <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-word-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#000" />
                </svg>
              </a>

            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p style="margin-left:42px">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if file is sent and filetype is ppt -->

      <div ng-if="me.pk === message.originator &&  message.fileType == 'ppt' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-ppt-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:white;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#fff" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:white;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:white;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>


      <!-- if file is recived and filetype is ppt -->

      <div ng-if="me.pk != message.originator &&  message.fileType == 'ppt' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
          <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-ppt-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#000" />
                </svg>
              </a>

            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p style="margin-left:42px">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if file is sent and filetype is xl -->

      <div ng-if="me.pk === message.originator &&  message.fileType == 'xl' " class="file-card margin-l-auto   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div class="file-sent" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-xls-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:white;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#fff" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:white;">{{message.fileSize/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:white;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p class="margin-l-auto">{{message.created | timeAgo}}</p>
        </div>
      </div>

      <!-- if file is recived and filetype is xl -->

      <div ng-if="me.pk != message.originator &&  message.fileType == 'xl' " class="file-card   padding-2 m-top-5 m-bottom-5" style="width: 50%;">
        <div class="" style="display: flex;justify-content: space-between;">
          <div style="padding: 0px;width: 40px;margin-top: auto;height: 40px;margin-bottom: 1%;margin-right: -3%;">
            <img ng-src="{{u.profile.displayPicture}}" src="/static/images/userIcon.png" onerror="this.src='/static/images/userIcon.png'" style="width:40px;" class="img img-circle">
          </div>
          <div class="file-recived" style="margin-left: 3%;width: 84%;border-radius: 6px;padding: 0.75rem;">
            <div style="display:flex;width:100%;" class="file-card padding-2 ">
              <img src="/static/images/icons8-xls-96.png" alt="" width="40">
              <p class="margin-y-auto m-left-4" style="color:black;font-size:12px">{{message.fileName}}</p>
              <a href="{{message.attachment}}" target="_blank" class="margin-l-auto padding-2 margin-y-auto">
                <svg width="30" height="30" viewBox="0 0 190 190" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M57 142.5V123.5H133V142.5H57ZM133 76L95 114L57 76H80.75V38H109.25V76H133ZM95 0C147.25 0 190 42.75 190 95C190 147.25 147.25 190 95 190C42.75 190 0 147.25 0 95C0 42.75 42.75 0 95 0ZM95 19C53.01 19 19 53.01 19 95C19 136.99 53.01 171 95 171C136.99 171 171 136.99 171 95C171 53.01 136.99 19 95 19Z"
                    fill="#000" />
                </svg>
              </a>


            </div>
            <div style="display:flex;width:95%;font-size:12px" class=" margin-auto">
              <div style="display:flex;" class="margin-r-auto">
                <p class="m-right-2 margin-y-auto" style="color:black;">{{message.fileSize/1000/1000}}</p>
                <p class="m-left-2 margin-y-auto" style="color:black;">{{message.fileType}}</p>
              </div>
            </div>
          </div>
        </div>
        <div style="display:flex;width:87%;margin-top: 3%;margin-left: 3%;" class=" margin-auto">
          <p style="margin-left:42px">{{message.created | timeAgo}}</p>
        </div>
      </div>




    </div>
  </div>

  <div style="display: flex;" class="chat-input " style="width:42.5% !important;">
    <div class="attachment m-left-3 paddig-3 margin-y-auto">
      <input type="file" style="display : none;" file-model="form.file" id="filePicker">
      <button ng-click="openFilePicker()" type="button" name="button" style="border:none;background:#fff;">
        <svg width="30" height="30" viewBox="0 0 167 167" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M29.6771 77.8244C21.8735 85.6279 17.4895 96.2118 17.4895 107.248C17.4895 118.284 21.8735 128.867 29.6771 136.671C37.4806 144.474 48.0645 148.858 59.1003 148.858C70.1362 148.858 80.7201 144.474 88.5236 136.671L144.695 80.4992C150.371 74.8239 153.559 67.1266 153.559 59.1005C153.559 51.0744 150.371 43.377 144.695 37.7017C139.02 32.0264 131.323 28.8381 123.297 28.8381C115.271 28.8381 107.573 32.0264 101.898 37.7017L56.4255 83.1741C52.8784 86.7211 50.8857 91.532 50.8857 96.5483C50.8857 101.565 52.8784 106.375 56.4255 109.923C59.9726 113.47 64.7834 115.462 69.7997 115.462C74.816 115.462 79.6269 113.47 83.1739 109.923L123.297 69.7999L115.272 61.7753L75.1494 101.898C73.7306 103.317 71.8062 104.114 69.7997 104.114C67.7932 104.114 65.8689 103.317 64.45 101.898C63.0312 100.479 62.2341 98.5548 62.2341 96.5483C62.2341 94.5418 63.0312 92.6174 64.45 91.1986L109.922 45.7263C111.679 43.9699 113.764 42.5767 116.059 41.6262C118.353 40.6757 120.813 40.1865 123.297 40.1865C125.78 40.1865 128.24 40.6757 130.535 41.6262C132.829 42.5767 134.914 43.9699 136.671 45.7263C138.427 47.4826 139.82 49.5677 140.771 51.8624C141.721 54.1572 142.211 56.6167 142.211 59.1005C142.211 61.5843 141.721 64.0438 140.771 66.3386C139.82 68.6333 138.427 70.7184 136.671 72.4747L80.4991 128.646C74.8238 134.322 67.1264 137.51 59.1003 137.51C51.0743 137.51 43.3769 134.322 37.7016 128.646C32.0263 122.971 28.8379 115.274 28.8379 107.248C28.8379 99.2216 32.0263 91.5242 37.7016 85.8489L88.5236 35.0269L80.4991 27.0024L29.6771 77.8244Z"
            fill="grey" />
        </svg>
      </button>
    </div>

    <div class="m-left-3 margin-y-auto" style="width:80%;">
      <input ng-model="form.text" ng-enter="send()" class="form-control" type="text" placeholder="Type your message...." style="border-radius:30px;padding: 19px;">
    </div>
    <div class="" style="padding:1rem">
      <div ng-click="send()" style="height: 40px;padding:1rem 2rem;margin:auto;display: inline-flex;margin-left: 2%;background: #004DFC;color: #fff;border-radius: 6px !important;cursor:pointer;" class="send-btn  margin-y-auto m-bottom-2">
        <p style="margin-right:12%">SEND</p>
        <svg width="25" height="25" viewBox="0 0 21 18" fill="none">
          <path d="M0 18L21 9L0 0V7L15 9L0 11V18Z" fill="#fff" />
        </svg>
      </div>
    </div>
  </div>

</div>




</div>
</div>
