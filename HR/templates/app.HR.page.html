{% extends 'base.html'%}
{% load staticfiles %}

<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="/static/css/bootstrap.min.css" charset="utf-8">
  <link rel="stylesheet" href="/static/css/font-awesome.min.css" charset="utf-8">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/owl.carousel.css" charset="utf-8">
  <link rel="stylesheet" href="/static/css/owl.theme.default.css" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/angular-ui-switch.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/app.HR.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/app.HR.ecommerce.css' %}" charset="utf-8">
</head>
<style media="screen">
  {{footerCss | safe}}
  {{headerCss | safe}}
</style>
{% block header %}

  <div class="" >
    {{ header | safe}}
  </div>

{% endblock %}
{% block content %}
<div ng-app="app" ng-controller="main"  ng-init="division = '{{divisionJson}}'" style="margin-top:30px;margin-bottom:30px;">

{% for component in components %}
  <div class="" ng-init="data = '{{component.data | safe}}'">
    <style media="screen" >
      {{component.css | safe}}
    </style>
      {{component.template|safe}}
  </div>
{% endfor %}

</div>

<!-- {% verbatim %}
<p>{{components}}</p>

{% endverbatim %} -->



{% endblock %}

<script type="text/javascript">

  var app = angular.module('app', [ 'ngSanitize', 'ui.bootstrap']);

  app.controller('main', function($scope, $http, $sce, $uibModal) {

    $scope.getComponents = function() {

      $http({
        method: 'GET',
        url: '/api/website/components/?parent=' + page,
      }).
      then(function(response) {
        $scope.components = response.data

      })
    }
    $scope.getComponents()
  });



</script>
{% block specific_js %}


<script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
<script src="{% static 'js/jquery.cookie-1.4.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/angular.min.js' %}"></script>
<script src="{% static 'js/ui-bootstrap-tpls-0.14.3.min.js' %}"></script>
<script src="{% static 'js/angular-bootstrap-confirm.min.js' %}"></script>
<script src="{% static 'js/angular-ui-router.min.js' %}"></script>
<script src="{% static 'js/angular-sanitize.min.js' %}"></script>
<script src="{% static 'js/angular-flash.js' %}"></script>
<script src="{% static 'js/app.main.js' %}"></script>
<script src="{% static 'js/custom/directives.js' %}"></script>
<script src="{% static 'js/custom/directives.native.js' %}"></script>
<script src="{% static 'js/custom/nativeJS.js' %}"></script>
<script src="{% static 'js/custom/services.js' %}"></script>
<script src="{% static 'js/angular-owl-carousel-2.js' %}"></script>
<script src="{% static 'js/custom/ecommerce.directive.js' %}"></script>

{% block pageJS %}
<script type="text/javascript">
  var DIVISION_APIKEY = '{{API_KEY}}'
  var page = '{{page.pk}}'
</script>
{% if page.enableChat %}
<script src="/script/chatter-{{API_KEY}}.js?debugger=1"></script>
{% endif %}
{% endblock %}



{% endblock %}

{% block footer %}

  <div class="" >
    <style media="screen">
      {{footerCss | safe}}
    </style>
    {{ footer | safe}}
  </div>

{% endblock %}
